<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body bgcolor="#F8F8F8">

<div th:replace="common/common"></div>

<script type="text/javascript">
    function sub() {
        var name = $("#name").val();
        var phone = $("#phone").val();
        if (name.length < 1 || name.length > 12) {
            $("#dialog_info").text("姓名格式不正确，请重新输入！");
            $("#dialog").show();
            return;
        }
        if (phone.length !== 11) {
            $("#dialog_info").text("手机号码格式不正确，请重新输入！");
            $("#dialog").show();
            return;
        }
        $("#submit").click();
    }
    function hideDialog() {
        $("#dialog").hide();
    }
</script>

<div class="weui-cells__title">学号</div>
<div class="weui-cells">
    <div class="weui-cell">
        <div class="weui-cell__bd">
            <p th:text="${userDTO.getStudentId()}"></p>
        </div>
    </div>
</div>

<form th:action="@{'/me/' + ${userDTO.getUserId()}}" method="post">
    <div class="weui-cells__title"></div>
    <div class="weui-cells weui-cells_form">
        <div class="weui-cell">
            <div class="weui-cell__hd"><label class="weui-label">姓名</label></div>
            <div class="weui-cell__bd">
                <input id="name" th:value="${userDTO.getName()}" name="name" class="weui-input" type="text" placeholder="请输入真实姓名"/>
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-cell__hd"><label class="weui-label">手机号</label></div>
            <div class="weui-cell__bd">
                <input id="phone" th:value="${userDTO.getPhone()}" name="phone" class="weui-input" type="tel" pattern="[0-9]{11}" placeholder="请输入手机号"/>
            </div>
        </div>
    </div>

    <button id="submit" type="submit" style="display: none"></button>
</form>

<a onclick="sub()" class="weui-btn weui-btn_primary">提交修改</a>
<a th:href="@{/me}" class="weui-btn weui-btn_default">返回</a>

<div id="dialog" style="display: none;">
    <div class="weui-mask"></div>
    <div class="weui-dialog">
        <div class="weui-dialog__hd"><strong class="weui-dialog__title">错误</strong></div>
        <div id="dialog_info" class="weui-dialog__bd">错误信息</div>
        <div class="weui-dialog__ft">
            <a href="javascript:hideDialog()" class="weui-dialog__btn weui-dialog__btn_primary">确定</a>
        </div>
    </div>
</div>

</body>
</html>